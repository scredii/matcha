<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>First Page</title>
	<link rel="stylesheet" href="assets/semantic/dist/semantic.min.css">
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script type="text/javascript" src="/assets/geolocator/dist/geolocator.min.js"></script>
<script type="text/javascript">

    geolocator.config({
        language: "en",
        google: {
            version: "3",
            key: "AIzaSyB9Gr5C1dfF_1NnemWPlD9ideN3DG6Dn4I"
        }
    });
 
    window.onload = function () {
        var options = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumWait: 10000,     // max wait time for desired accuracy 
            maximumAge: 0,          // disable cache 
            desiredAccuracy: 30,    // meters 
            fallbackToIP: true,     // fallback to IP if Geolocation fails or rejected 
            addressLookup: true,    // requires Google API key if true 
            timezone: true,         // requires Google API key if true 
            // map: "map-canvas",      // interactive map element id (or options object) 
            staticMap: false         // map image URL (boolean or options object) 
        };
        geolocator.locate(options, function (err, location) {
            if (err) return console.log(err);
            console.log(location);
			return axios.post('http://localhost:8080/locate', {
				longitude: location, 
    		});
        });
    };
 
</script> 
	<style>
		.ui.small.basic.icon.buttons
		{
			border: none !important;
		}
		.ui.tiny.images
		{
			padding-top: 25px;
			
		}
		.main.container
		{
			margin-top: 7em;
		}
		.ui.teal.label
		{
			margin: 3px;
		}
		.ui.right.labeled.left.icon.input
		{
			padding-top: 10px;
		}
	</style>
</head>
<header>
<div class="ui fixed inverted menu">
	<a href="/" class="title item"><h1 class="ui red inverted header">Matcha.</h1></a>
	<a href="/" class="header item">Accueil</a>
	<a href="/logout" class="header item">Logout</a>
</div>
</header>
<body>
	<div class="ui main container">
		<% if (locals.flash && locals.flash.error) { %>
		<div class="ui negative message">
			<%= flash.error %>
		</div>
		<% } %>
		<% if (locals.flash && locals.flash.success) { %>
		<div class="ui positive message">
			<%= flash.success %>
		</div>
		<% } %>